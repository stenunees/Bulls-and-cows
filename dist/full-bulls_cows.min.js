/*!
* Bulls-Cows Mind game - v0.0.1 - 2019-11-30
* https://github.com/NioniosFr/js-bulls-cows
* Copyright (c) 2019 [NioniosFr] Dionysios Fryganas 
* Licensed under: MIT 
*/

function Game(){var t,n=document.getElementById("initial"),r=document.getElementById("guessLength"),e=document.getElementById("start"),s=document.getElementById("inGame"),u=document.getElementById("userInput"),o=document.getElementById("userGuess"),l=document.getElementById("guess"),i=document.getElementById("reset"),a=document.getElementById("log"),c=document.getElementById("error"),d=document.getElementById("pcGuess"),g=document.getElementById("success"),f=document.getElementById("reverse");i.addEventListener("click",function(){t=null,y(n),E(s),a.innerHTML="",E(a),o.value="",p(),E(g)});function m(e){a.innerHTML=t.getRounds(f.checked),y(a)}function h(e){c.innerHTML=e,y(c)}this.getProcessor=function(){return t};function v(){var e=r.value.trim();isNaN(e)||9<e?h("Add a number please, of maximum length 9."):(t=new Processor(e),p(),E(n),y(s),y(u),d.value=t.getPcGuess())}function I(){var e=o.value.trim();isNaN(e)||e.length!=t.getGuessLength()?h("Add a number please, of maximum length "+t.getGuessLength()+"."):(t.setInput(o.value),p(),t.getResult()&&(g.innerHTML="<p><strong>Congratulations!</strong> You won in "+t.getLastResult().turn+" turns.</p>",y(g)),m())}var p=function(){c.innerHTML="",E(c)},y=function(e){e.style.display="block"},E=function(e){e.style.display="none"};e.addEventListener("click",v),document.getElementById("guessLength").addEventListener("keypress",function(e){13==e.keyCode&&(e.preventDefault(),v())}),l.addEventListener("click",I),document.getElementById("userGuess").addEventListener("keypress",function(e){13==e.keyCode&&(e.preventDefault(),I())}),f.addEventListener("click",m),E(s)}function Processor(e){for(var n,r=[],s=[],o=parseInt(e,10),l=[],t=0;t<o;t++){var u,i=!1;do{u=Math.floor(9*Math.random()+0);for(var a=0;a<r.length&&!(i=r[a]==u);a++);}while(i);r[t]=u}this.getPcGuess=function(){return r},this.getGuessLength=function(){return o},this.setInput=function(e){for(var t=0;t<o;t++)s[t]=parseInt(e[t],10);n=parseInt(e,10)},this.getResult=function(){var e=l.length;return l[e]={},l[e].bulls=d(),l[e].cows=g(),l[e].userInput=n,l[e].turn=e+1,l[e].bulls===o},this.getRounds=function(e){var t,n="<table id='entries' class='table table-condensed'><tbody><tr><th>Turn</th><th>Input</th><th>Cows</th><th>Bulls</th></tr>";if(e)for(var r=l.length-1;0<=r;r--)n+=l[r].bulls===o?'<tr class="success">':"<tr>",t=String(l[r].userInput).length===o?l[r].userInput:"0"+l[r].userInput,n+=c(l[r].turn),n+=c(t),n+=c(l[r].cows),n+=c(l[r].bulls),n+="</tr>";else for(var s=0,u=l.length;s<u;s++)n+=l[s].bulls===o?'<tr class="success">':"<tr>",t=String(l[s].userInput).length===o?l[s].userInput:"0"+l[s].userInput,n+=c(l[s].turn),n+=c(t),n+=c(l[s].cows),n+=c(l[s].bulls),n+="</tr>";return n+="</tbody></table>"};var c=function(e,t){return e=e||"-","<td class='"+String(t)+"'>"+String(e)+"</td>"},d=function(){for(var e=0,t=0;t<o;t++)e+=s[t]===r[t]?1:0;return e};this.setPcGuess=function(e){for(var t=0;t<o;t++)r[t]=parseInt(e[t],10)},this.getLastResult=function(){return l[l.length-1]};var g=function(){for(var e=0,t=0;t<o;t++)for(var n=0;n<o;n++)if(s[t]===r[n]&&t!=n){e+=1;break}return e}}function BrootForcer(e){var n=e;new Date;this.findNoBull=function(){var e=!1;do{var t=Math.floor(9*Math.random()+0);n.setInput(String(t)),n.getResult(),0===n.getLastResult().bulls&&(e=!0)}while(!e)},this.break=function(){}}